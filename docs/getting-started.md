## Development

- git clone https://github.com/tomoya92/pybbs
- Open with idea, the project is developed with idea, if you are familiar with eclipse, it is also possible
- Idea open it will automatically build the project, the build tool is maven
- Modify the database configuration in the configuration file `src/main/resources/application-dev.yml`
- Find the `co.yiiu.pybbs.PybbsApplication` class and run the main method to start it.
- The browser opens `http://localhost:8080` , the backend address `http://localhost:8080/adminlogin` 
    backend username admin password 123123

## Deployment

- First ensure that the java environment is configured on your server, version jdk1.8 and MySQL server, 
    version 5.7.x other optional environment configuration see [Ready](ready)
- Then download the latest one-click start compression package, download address: [https://github.com/tomoya92/pybbs/releases](https://github.com/tomoya92/pybbs/releases)
- Unzip, modify the `application-prod.yml` file in the extracted folder, only need to modify a place, 
    which is the connection information of the database, [Base](base)
- Run the script in the zip file `sh start.sh`
- Turn off service operation `sh shutdown.sh` 
- View the startup log `tail -200f log.file`
- Check if the service is started `ps -ef|grep pybbs` 如果有pybbs的进程，就说明服务启动了

## Docker

- Ensure that the server has docker and docker-compose environment
- `git clone https://github.com/tomoya92/pybbs`
- cd pybbs
- run command `docker-compose up -d`
- browser open `http://localhost:8080` 
- view log `docker-compose logs -f server`

**The first run will be slower, depending on server performance and network speed**

**The `mysql` folder will be generated as the database file in the root directory of the project. Be careful. 
    After the forum is started, the uploaded images and the default avatar generated by the system will be automatically 
    synchronized to the `static` folder in the root directory.**

**Special thanks to github user [@zzzzbw](https://github.com/zzzzbw) for helping to develop dockerfile**


## War Deploy（Not recommended）

Modify the code in this way

- First open `pom.xml` edit `<packaging>jar</packaging>` to `<packaging>war</packaging>`
- Then add a dependency in `dependencies`

```xml
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-tomcat</artifactId>
  <scope>provided</scope>
</dependency>
```
    
- Create a class under `src/main/java/co/yiiu/pybbs/`, name it casually, then copy the following into it

```java
package co.yiiu.pybbs;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;

@SpringBootApplication
public class Application extends SpringBootServletInitializer {

  @Override
  protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
    return application.sources(Application.class);
  }

  public static void main(String[] args) {
    SpringApplication.run(Application.class, args);
  }
}
```
    
- Finally run `mvn clean assembly:assembly` to package
- After the package is successful, find the `pybbs.war` in the target, copy it to the webapps under tomcat, and start tomcat.

**I really don't recommend this method to start**
